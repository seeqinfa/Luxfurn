# Railway Deployment Checklist for LuxFurn Project

## Pre-Deployment Checklist

### 1. Code Preparation
- [ ] All sensitive data moved to environment variables
- [ ] Database configuration updated to use Railway environment variables
- [ ] Rasa server URLs updated for production
- [ ] Docker files created and tested locally
- [ ] Requirements files are complete and accurate

### 2. Database Preparation
- [ ] All SQL schema files are ready
- [ ] Database migration order is documented
- [ ] Sample data is prepared (optional)
- [ ] Database indexes are optimized

### 3. File Structure
- [ ] All necessary files are in the repository
- [ ] .gitignore is properly configured
- [ ] No sensitive files are committed
- [ ] Image assets are properly organized

## Railway Deployment Steps

### Step 1: Create Railway Project
- [ ] Sign up/login to Railway
- [ ] Create new project
- [ ] Connect GitHub repository

### Step 2: Deploy MySQL Database
- [ ] Add MySQL service to Railway project
- [ ] Note down database connection details
- [ ] Import database schema using Railway's database client or external tool
- [ ] Verify all tables are created correctly

### Step 3: Deploy Rasa Service
- [ ] Create new service in Railway project
- [ ] Set build configuration to use Dockerfile
- [ ] Configure environment variables:
  - [ ] MYSQLHOST
  - [ ] MYSQLPORT
  - [ ] MYSQLUSER
  - [ ] MYSQLPASSWORD
  - [ ] MYSQLDATABASE
- [ ] Deploy and wait for build completion
- [ ] Test Rasa API endpoint

### Step 4: Deploy Web Application
- [ ] Create new service for web application
- [ ] Configure Docker build
- [ ] Set environment variables:
  - [ ] Database connection variables
  - [ ] RASA_SERVER_URL (from Step 3)
- [ ] Deploy web application
- [ ] Test web application access

### Step 5: Configure Service Communication
- [ ] Update web app to use Railway Rasa URL
- [ ] Test chatbot integration
- [ ] Verify database connections from both services

## Post-Deployment Testing

### Functionality Testing
- [ ] User registration works
- [ ] User login works
- [ ] Product browsing works
- [ ] Shopping cart functionality
- [ ] Order placement process
- [ ] Chatbot responds correctly
- [ ] Admin panel access (if applicable)
- [ ] Support ticket system
- [ ] File uploads work correctly

### Performance Testing
- [ ] Page load times are acceptable
- [ ] Database queries are optimized
- [ ] Chatbot response times are reasonable
- [ ] Image loading is optimized

### Security Testing
- [ ] HTTPS is enforced
- [ ] Database connections are secure
- [ ] User authentication works properly
- [ ] Admin access is restricted
- [ ] Input validation is working

## Troubleshooting Common Issues

### Database Connection Issues
- [ ] Verify environment variables are set correctly
- [ ] Check database service is running
- [ ] Test connection using Railway's database client
- [ ] Verify firewall/network settings

### Rasa Service Issues
- [ ] Check build logs for errors
- [ ] Verify Python dependencies are installed
- [ ] Test model training completion
- [ ] Check memory and CPU limits

### Web Application Issues
- [ ] Verify PHP extensions are installed
- [ ] Check Apache configuration
- [ ] Test file permissions
- [ ] Verify asset loading

### CORS and API Issues
- [ ] Verify CORS settings in Rasa
- [ ] Check API endpoints are accessible
- [ ] Test cross-origin requests
- [ ] Verify SSL certificates

## Monitoring and Maintenance

### Set Up Monitoring
- [ ] Configure Railway alerts
- [ ] Monitor service health
- [ ] Set up error logging
- [ ] Monitor database performance

### Regular Maintenance
- [ ] Update dependencies regularly
- [ ] Monitor disk usage
- [ ] Backup database regularly
- [ ] Review and optimize queries

### Scaling Considerations
- [ ] Monitor resource usage
- [ ] Plan for traffic increases
- [ ] Consider CDN for static assets
- [ ] Optimize database indexes

## Environment Variables Reference

### Database Service (Auto-generated by Railway)
```
MYSQLHOST=containers-us-west-xxx.railway.app
MYSQLPORT=3306
MYSQLUSER=root
MYSQLPASSWORD=generated-password
MYSQLDATABASE=railway
```

### Web Application Service
```
MYSQLHOST=<copy from database service>
MYSQLPORT=<copy from database service>
MYSQLUSER=<copy from database service>
MYSQLPASSWORD=<copy from database service>
MYSQLDATABASE=<copy from database service>
RASA_SERVER_URL=https://your-rasa-service.railway.app
```

### Rasa Service
```
MYSQLHOST=<copy from database service>
MYSQLPORT=<copy from database service>
MYSQLUSER=<copy from database service>
MYSQLPASSWORD=<copy from database service>
MYSQLDATABASE=<copy from database service>
PORT=<auto-set by Railway>
```

## Support and Resources

- Railway Documentation: https://docs.railway.app/
- Railway Community: https://discord.gg/railway
- Rasa Documentation: https://rasa.com/docs/
- PHP Docker Images: https://hub.docker.com/_/php

Remember to test thoroughly in a staging environment before deploying to production!