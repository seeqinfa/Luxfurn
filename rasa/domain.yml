version: "3.1"

intents:
  - affirm
  - ask_delivery
  - ask_help
  - cancel_order
  - deny
  - escalate
  - feedback_request
  - goodbye
  - greet
  - show_menu
  - nlu_fallback
  - product_inquiry
  - provide_dimensions
  - provide_order_id
  - search_furniture
  - instruction_manual
  - inform
  - select_order
entities:
  - order_id
  - furniture_name
  - dimensions

slots:
  order_id:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: order_id

  furniture_name:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: furniture_name

  dimensions:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: dimensions

  feedback_rating:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: feedback_form
            requested_slot: feedback_rating
  feedback_text:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: feedback_form
            requested_slot: feedback_text

  # slot used by the manual form
  manual_furniture:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: manual_form
            requested_slot: manual_furniture
            
  cancel_context:
    type: bool
    influence_conversation: true
    mappings:
      - type: custom
  info_context:
    type: bool
    influence_conversation: true
    mappings:
      - type: custom
      
forms:
  feedback_form:
    required_slots:
      - feedback_rating
      - feedback_text

  manual_form:
    ignored_intents:
      - nlu_fallback
      - ask_help
      - cancel_order
      - search_furniture
      - provide_dimensions
    required_slots:
      - manual_furniture

responses:
  utter_greet:
    - text: "Hi there! How can I assist you today?"

  utter_main_menu:
    - text: "Please choose an option:"
      buttons:
        - title: "Check Order Status"
          payload: /ask_delivery
        - title: "Cancel Order"
          payload: /cancel_order
        - title: "Furniture Recommendations"
          payload: /product_inquiry
        - title: "Feedback"
          payload: /feedback_request
          
  utter_ask_feedback_rating:
    - text: "Please rate our service from 1‚Äì5 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê"
    
  utter_ask_feedback_text:
    - text: "Share your feedback."
    
  utter_thank_for_feedback:
    - text: "Thanks for your feedback! üôè"

  utter_goodbye:
    - text: "Goodbye! Let me know if you need anything else."

  utter_ask_order_id:
    - text: "Please provide your order ID."

  utter_ask_dimensions:
    - text: "What are the dimensions of your space? (e.g., 200x100x80 cm)"

  utter_order_status:
    - text: "Your order {order_id} is currently being processed and will be delivered soon."

  utter_order_canceled:
    - text: "Your order {order_id} has been canceled successfully."

  utter_no_order_found:
    - text: "Sorry, I couldn't find an order with that ID."

  utter_show_furniture:
    - text: "Here are some products that match your space: [product_list]."

  utter_escalate:
    - text: "Connecting you to a human agent now..."

  # Use the slot filled by manual_form
  utter_instruction_manual:
    - text: "Here is the instruction manual for {manual_furniture}: [link]"

  utter_thanks_feedback:
    - text: "Thank you for your feedback!"

  utter_product_listing:
    - text: "Here are our latest furniture items: [listing_link]"
  utter_ask_which_order_cancel:
  - text: "Which order would you like to cancel? (I‚Äôve listed your orders above.) You can click a button or type the order ID."
  utter_ask_which_order_status:
  - text: "Which order would you like to check? (I‚Äôve listed your orders above.) You can click a button or type the order ID."
  utter_confirm_cancel:
  - text: "Confirm cancel for order #{order_id}?"
    buttons:
      - title: "Yes, cancel it"
        payload: /affirm
      - title: "No"
        payload: /deny
  utter_cancel_aborted:
  - text: "Cancellation aborted."
  utter_fallback:
    - text: |
        Sorry, I didn't understand that. Here's some common queries I can help you with:

          1. Browse our furniture catalog 
          2. Check your order status  
          3. Leave feedback or a review  
          4. Talk to a human agent  

        Just type what you'd like to do!

  utter_ask_help:
    - text: |
        Here's some common queries I can help you with:

          1. Browse our furniture catalog 
          2. Check your order status  
          3. Leave feedback or a review  
          4. Talk to a human agent  

        Just type what you'd like to do!

  utter_example_rec:
    - text: 'I would recommend the <a href="http://localhost/FYP-25-S2-34-Chatbot/Src/Boundary/Customer/viewFurnitureDetailsUI.php?id=3">Ergo Chair</a>'

  utter_ask_manual_furniture:
    - text: "Which furniture item do you need the instruction manual for?"

actions:
  - action_check_order
  - action_cancel_order
  - utter_greet
  - action_store_feedback
  - action_find_furniture
  - action_get_manual
  - action_reset_manual_slot
  - action_pick_order_for_cancel
  - action_pick_order_for_info
  - action_order_details
  - utter_ask_order_id
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: false
